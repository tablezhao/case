# 智能案例导入功能 - 使用指南

## 功能概述

智能案例导入是合规通平台的AI驱动功能，能够自动从监管部门官网抓取并解析通报案例，大幅提升数据录入效率。

### 核心优势

- ⚡ **高效快速**：10-30秒完成网页解析
- 🤖 **AI智能**：自动识别7大关键字段
- ✅ **准确可靠**：提供置信度评分和人工审核
- 📊 **结构化**：自动生成标准化数据
- 📋 **可追溯**：完整的执行报告

## 快速开始

### 步骤1：进入智能导入页面

1. 使用管理员账号登录系统
2. 点击顶部导航栏的"管理后台"
3. 在管理后台首页点击"智能导入"卡片

### 步骤2：输入网页URL

1. 打开监管部门发布的通报案例网页
2. 复制浏览器地址栏中的完整URL
3. 粘贴到"网页地址"输入框
4. 点击"开始解析"按钮

**示例URL格式**：
```
https://www.miit.gov.cn/jgsj/xgj/APPqhyhqkxx/2024/01/15/notice123.html
https://www.cac.gov.cn/2024-01/15/c_1234567890.htm
```

### 步骤3：等待AI解析

系统将自动执行以下操作：

1. **抓取网页内容**（5-10秒）
   - 获取HTML源代码
   - 清理脚本和样式
   - 提取纯文本内容

2. **AI智能分析**（10-20秒）
   - 识别通报日期
   - 提取应用名称
   - 识别开发者信息
   - 匹配监管部门
   - 识别应用平台
   - 提取违规摘要
   - 提取详细内容

3. **生成结构化数据**
   - 格式化日期
   - 标准化字段
   - 计算置信度

### 步骤4：检查并编辑数据

解析完成后，系统会显示提取的数据：

#### 置信度指标

- 🟢 **高（80%+）**：数据准确度高，建议快速审核
- 🟡 **中（50-80%）**：部分字段可能不准确，需仔细检查
- 🔴 **低（<50%）**：多数字段缺失，建议手动补充

#### 必填字段

- ✅ **应用名称**：必须填写
- ✅ **通报日期**：必须填写，格式YYYY-MM-DD

#### 可选字段

- 开发者/运营者
- 监管部门
- 应用平台
- 违规问题摘要
- 详细违规内容

#### 编辑建议

1. **检查应用名称**：确保准确无误
2. **验证日期**：确认通报发布日期
3. **补充缺失字段**：根据原文补充未识别的信息
4. **优化摘要**：精简违规问题描述（建议100字以内）
5. **完善详情**：补充完整的违规事实描述

### 步骤5：确认导入

1. 检查所有字段无误后，点击"确认导入"
2. 系统自动匹配部门和平台ID
3. 保存案例到数据库
4. 生成执行报告

### 步骤6：查看执行报告

导入成功后，系统显示详细报告：

#### 报告内容

- **操作类型**：创建新案例/更新案例
- **案例ID**：数据库唯一标识符
- **提取字段统计**：各字段提取情况
- **警告信息**：未能识别的字段列表

#### 后续操作

- **查看案例列表**：跳转到案例管理页面
- **继续导入**：清空表单，导入下一个案例

## 高级功能

### 批量导入（规划中）

未来版本将支持：
- 导入URL列表
- 批量解析处理
- 进度实时显示
- 失败重试机制

### 智能推荐（规划中）

基于历史数据：
- 自动推荐部门名称
- 自动推荐平台名称
- 关联相似案例

## 常见问题

### Q1：为什么解析失败？

**可能原因**：
- URL格式错误或无法访问
- 网页需要登录或验证
- 网页内容格式特殊
- 网络连接超时

**解决方案**：
1. 检查URL是否正确
2. 确认网页可以直接访问
3. 尝试使用其他浏览器复制URL
4. 如果持续失败，使用手动录入

### Q2：为什么某些字段未能识别？

**可能原因**：
- 网页格式不标准
- 关键信息缺失
- 文本表述方式特殊

**解决方案**：
1. 查看警告信息了解缺失字段
2. 手动补充未识别的字段
3. 参考原文确保准确性

### Q3：部门或平台不存在怎么办？

**解决方案**：
1. 先保存案例（部门/平台字段为空）
2. 进入"部门与平台"管理页面
3. 创建新的部门或平台
4. 返回案例管理，编辑案例补充信息

### Q4：如何提高识别准确度？

**建议**：
1. 使用政府官网正式通报页面
2. 选择内容完整、格式规范的页面
3. 避免使用新闻转载或摘要页面
4. 确保网页包含完整的案例信息

### Q5：可以导入哪些网站的内容？

**支持的网站**：
- 工业和信息化部官网
- 国家互联网信息办公室官网
- 各省市通信管理局官网
- 各省市网信办官网
- 其他政府监管部门官网

**限制**：
- 仅支持HTTP/HTTPS协议
- 网页大小不超过5MB
- 请求超时时间30秒

## 技术说明

### 数据提取算法

系统使用以下技术提取数据：

1. **正则表达式匹配**
   - 日期格式识别
   - 应用名称提取
   - 关键词定位

2. **关键词搜索**
   - 部门名称匹配
   - 平台名称识别
   - 违规问题定位

3. **上下文分析**
   - 段落相关性判断
   - 句子重要性评分
   - 内容完整性检查

### 置信度计算

```
置信度 = 成功提取的字段数 / 总字段数（7个）

- 7/7 = 100%：完美提取
- 6/7 = 86%：高置信度
- 5/7 = 71%：中等置信度
- 4/7 = 57%：低置信度
- <4/7 = <57%：需要大量人工补充
```

### 安全机制

1. **URL验证**
   - 格式检查
   - 协议限制
   - 域名白名单（可选）

2. **内容过滤**
   - 大小限制（5MB）
   - 脚本清理
   - 恶意代码检测

3. **超时控制**
   - 网页抓取：30秒
   - AI分析：60秒
   - 总时长：90秒

## 最佳实践

### 导入前准备

1. **确认数据源**
   - 使用官方权威网站
   - 确认通报内容完整
   - 检查网页可访问性

2. **准备基础数据**
   - 预先创建常用部门
   - 预先创建常用平台
   - 了解案例基本信息

### 导入中注意

1. **仔细审核**
   - 逐字段检查准确性
   - 对比原文确认信息
   - 补充缺失的关键信息

2. **规范填写**
   - 日期格式统一
   - 名称表述一致
   - 摘要简洁明了

### 导入后检查

1. **验证数据**
   - 在案例列表中查看
   - 确认显示正常
   - 测试搜索功能

2. **质量控制**
   - 定期抽查导入数据
   - 统计识别准确率
   - 优化导入流程

## 性能优化

### 提升解析速度

1. **网络优化**
   - 使用稳定的网络连接
   - 避免高峰时段操作
   - 选择响应快的网站

2. **并发控制**
   - 避免同时解析多个URL
   - 等待前一个完成再开始下一个
   - 合理安排导入任务

### 减少错误率

1. **选择优质数据源**
   - 官方网站优先
   - 格式规范的页面
   - 内容完整的通报

2. **人工辅助**
   - 低置信度数据重点检查
   - 关键字段手动验证
   - 建立数据质量标准

## 故障排除

### 常见错误代码

| 错误代码 | 说明 | 解决方案 |
|---------|------|---------|
| 400 | URL参数缺失或格式无效 | 检查URL格式 |
| 408 | 请求超时 | 重试或更换网络 |
| 500 | 系统错误 | 联系管理员 |

### 日志查看

管理员可以在浏览器开发者工具中查看详细日志：

1. 按F12打开开发者工具
2. 切换到Console标签
3. 查看错误信息和警告
4. 截图反馈给技术支持

## 更新日志

### v1.0.0 (2024-01-15)

**新增功能**：
- ✨ 智能网页解析
- ✨ 7大字段自动提取
- ✨ 置信度评分
- ✨ 人工审核编辑
- ✨ 执行报告生成

**技术特性**：
- 🚀 Supabase Edge Function
- 🤖 AI智能算法
- 🔒 安全验证机制
- ⚡ 30秒快速解析

## 技术支持

如有问题或建议，请联系：

- **技术支持**：通过系统反馈功能
- **使用咨询**：查看在线文档
- **功能建议**：提交改进意见

---

**文档版本**：v1.0  
**最后更新**：2024-01-15  
**适用版本**：合规通 v1.0+
