# 修复RPC函数中年度应用变化计算逻辑

## 问题分析
1. RPC函数`get_dashboard_stats`中缺少年度应用变化百分比的计算逻辑
2. 虽然计算了`v_year_apps_change`，但没有计算`v_year_apps_change_percent`
3. 这导致返回的`year_apps_change`和`year_apps_change_percent`值不正确
4. 与通报频次的完整计算口径不一致

## 调整方案

### 1. 修复RPC函数计算逻辑
- 添加完整的年度应用变化百分比计算逻辑
- 确保与通报频次使用相同的计算口径
- 处理上年度数据为0的边界情况

### 2. 调整内容
- 在`get_dashboard_stats`函数中添加年度应用变化百分比计算
- 确保计算逻辑与通报频次一致
- 修复返回JSON中的值

## 实施步骤
1. 修改`supabase/migrations/20251230120000_add_dashboard_stats_rpc.sql`文件
2. 添加年度应用变化百分比的计算逻辑
3. 确保计算结果正确处理边界情况
4. 测试修改后的函数返回值
5. 验证与通报频次计算口径的一致性

## 预期效果
- RPC函数返回完整的年度应用变化数据
- 年度涉及应用和通报频次使用相同的计算口径
- 当没有上年度数据时，显示合理的默认值
- 与前端计算逻辑保持一致

## 技术要点
- 使用与通报频次相同的百分比计算逻辑
- 处理上年度数据为0的情况
- 确保返回正确的数字类型
- 与现有代码风格保持一致