# 调整本年度涉及应用较上年度计算口径

## 问题分析
1. 当前本年度涉及应用的"较上年度"显示"暂无数据"，不符合预期
2. 参考本年度通报频次的计算口径，当数据为0时应显示"持平"
3. 问题出在StatsCard组件的显示逻辑和API返回数据类型不匹配

## 调整方案

### 1. 调整API返回数据类型
- 确保`year_apps_change`和`year_apps_change_percent`返回数字类型而非null
- 检查所有类似的环比计算逻辑，确保一致性

### 2. 优化StatsCard组件显示逻辑
- 调整`changePercent`的判断条件，确保0值正确显示"持平"
- 统一处理通报频次和涉及应用的显示逻辑
- 确保当没有上年度数据时，显示合理的默认值

### 3. 统一计算口径
- 确保本年度涉及应用和通报频次使用相同的时间范围计算
- 确保上年度数据查询逻辑一致
- 验证计算结果的准确性

## 实施步骤
1. 修改`src/db/api.ts`中的年度环比计算逻辑，确保返回正确的数字类型
2. 调整`src/components/home/StatsCard.tsx`中的显示逻辑，统一处理0值情况
3. 测试不同数据情况下的显示效果，确保符合预期
4. 验证本年度涉及应用和通报频次的计算口径一致

## 预期效果
- 当本年度涉及应用与上年度相同时，显示"持平 较上年度"
- 当本年度涉及应用与上年度不同时，显示具体的变化数值和百分比
- 与本年度通报频次的显示效果保持一致
- 确保所有时间维度（月、季度、年）的显示逻辑统一