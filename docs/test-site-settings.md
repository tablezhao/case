# 网站基本信息配置功能测试清单

## ✅ 实施完成检查

### 数据库层
- [x] 创建 `site_settings` 表
- [x] 添加字段约束（字符长度限制）
- [x] 创建索引
- [x] 启用RLS安全策略
- [x] 插入默认配置数据
- [x] 创建更新时间触发器
- [x] 创建Logo存储桶
- [x] 配置存储桶访问策略

### 类型定义
- [x] 添加 `SiteSettings` 接口

### API函数
- [x] `getSiteSettings()` - 获取配置
- [x] `updateSiteSettings()` - 更新配置
- [x] `uploadLogo()` - 上传Logo
- [x] `deleteLogo()` - 删除Logo

### 页面组件
- [x] 创建 `SiteSettingsPage` 管理页面
- [x] 文本输入框（标题、备用名称）
- [x] 字符计数显示
- [x] Logo上传功能
- [x] Logo预览功能
- [x] Logo删除功能
- [x] 文件格式验证
- [x] 文件大小验证
- [x] 保存按钮
- [x] 加载状态
- [x] 错误提示

### 路由配置
- [x] 添加 `/admin/site-settings` 路由
- [x] 配置权限（requireAdmin）

### 管理后台入口
- [x] 在AdminPage添加"网站基本信息"卡片
- [x] 配置图标和描述

### Header组件集成
- [x] 导入 `getSiteSettings` 和 `SiteSettings` 类型
- [x] 添加 `siteSettings` 状态
- [x] 加载配置数据
- [x] 桌面端显示Logo和标题
- [x] 移动端显示Logo和标题
- [x] 默认值处理

### 代码质量
- [x] ESLint检查通过
- [x] TypeScript类型检查通过
- [x] 无编译错误

## 🧪 功能测试清单

### 基础功能测试

#### 1. 页面访问
- [ ] 访问 `/admin/site-settings` 页面正常加载
- [ ] 非管理员无法访问（重定向到登录）
- [ ] 管理员可以正常访问

#### 2. 数据加载
- [ ] 页面加载时显示加载状态
- [ ] 成功加载默认配置数据
- [ ] 显示网站主标题："合规通"
- [ ] 显示备用名称："App监管案例查询平台"
- [ ] Logo为空（默认状态）

#### 3. 文本编辑
- [ ] 可以修改网站主标题
- [ ] 字符计数实时更新
- [ ] 主标题不能为空（验证）
- [ ] 主标题不能超过200字符（验证）
- [ ] 可以修改备用名称
- [ ] 备用名称可以为空
- [ ] 备用名称不能超过100字符（验证）

#### 4. Logo上传
- [ ] 点击上传区域打开文件选择器
- [ ] 选择PNG文件成功上传
- [ ] 选择JPG文件成功上传
- [ ] 选择SVG文件成功上传
- [ ] 选择其他格式文件被拒绝
- [ ] 上传超过2MB文件被拒绝
- [ ] 上传后显示预览
- [ ] 预览图片正确显示

#### 5. Logo删除
- [ ] 点击预览图右上角"×"按钮
- [ ] Logo预览消失
- [ ] 保存后Logo从服务器删除

#### 6. Logo更换
- [ ] 上传新Logo后点击"更换Logo"
- [ ] 旧Logo被删除
- [ ] 新Logo成功上传
- [ ] 预览显示新Logo

#### 7. 保存功能
- [ ] 点击"保存更改"按钮
- [ ] 显示"保存中..."状态
- [ ] 保存成功显示绿色提示
- [ ] 保存失败显示红色提示
- [ ] 数据库数据正确更新

#### 8. 前台同步
- [ ] 保存后刷新首页
- [ ] Header显示新的网站标题
- [ ] Header显示新的Logo
- [ ] 移动端菜单显示新标题和Logo

### 边界测试

#### 1. 字符限制
- [ ] 输入200字符标题可以保存
- [ ] 输入201字符标题无法保存
- [ ] 输入100字符备用名称可以保存
- [ ] 输入101字符备用名称无法保存

#### 2. 文件限制
- [ ] 上传1.9MB文件成功
- [ ] 上传2.0MB文件成功
- [ ] 上传2.1MB文件失败

#### 3. 空值处理
- [ ] 删除备用名称（留空）可以保存
- [ ] 删除Logo可以保存
- [ ] 删除主标题无法保存（必填）

### 错误处理测试

#### 1. 网络错误
- [ ] 断网情况下保存显示错误提示
- [ ] 网络恢复后可以重新保存

#### 2. 权限错误
- [ ] 非管理员尝试访问被拦截
- [ ] 非管理员尝试保存被拒绝

#### 3. 文件错误
- [ ] 上传损坏的图片文件
- [ ] 上传空文件
- [ ] 上传超大文件

### 用户体验测试

#### 1. 加载状态
- [ ] 页面加载时显示加载动画
- [ ] 保存时按钮显示"保存中..."
- [ ] 上传时按钮显示"上传中..."

#### 2. 反馈提示
- [ ] 保存成功显示Toast通知
- [ ] 保存失败显示Toast通知
- [ ] 文件格式错误显示Toast通知
- [ ] 文件大小超限显示Toast通知

#### 3. 响应式设计
- [ ] 桌面端布局正常
- [ ] 平板端布局正常
- [ ] 移动端布局正常
- [ ] 触摸操作友好

### 性能测试

#### 1. 加载性能
- [ ] 页面首次加载时间 < 2秒
- [ ] 配置数据加载时间 < 1秒

#### 2. 上传性能
- [ ] 1MB图片上传时间 < 3秒
- [ ] 2MB图片上传时间 < 5秒

#### 3. 保存性能
- [ ] 保存配置时间 < 2秒

### 安全测试

#### 1. 权限控制
- [ ] 未登录用户无法访问
- [ ] 普通用户无法访问
- [ ] 管理员可以访问

#### 2. 数据验证
- [ ] SQL注入防护
- [ ] XSS攻击防护
- [ ] 文件上传安全

#### 3. RLS策略
- [ ] 所有用户可读取配置
- [ ] 仅管理员可修改配置
- [ ] 仅管理员可上传Logo

## 📝 测试结果记录

### 测试环境
- 浏览器：Chrome / Firefox / Safari / Edge
- 操作系统：Windows / macOS / Linux
- 屏幕尺寸：桌面 / 平板 / 移动

### 测试日期
- 测试人员：
- 测试日期：
- 测试版本：

### 发现的问题
1. 
2. 
3. 

### 待优化项
1. 
2. 
3. 

---

**测试完成度**：0 / 100 项

**测试状态**：⏳ 待测试
