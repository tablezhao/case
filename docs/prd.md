# App监管案例查询平台升级需求文档

## 1. 网站概述

### 1.1 网站名称
合规通

### 1.2 网站描述
构建一个信息透明、查询便捷的平台，用于展示各级网络监管部门发布的App违规监管案例和监管资讯。通过数据可视化清晰呈现监管动态、地域分布及违规类型趋势，同时提供强大的后台数据管理能力和智能案例导入功能，确保信息的准确性和时效性。

## 2. 功能需求

### 2.1 前端用户界面功能

#### 2.1.1 首页核心模块

##### 2.1.1.1 数据概览（核心数据总览面板）

- 本月通报频次及涉及应用数量
- 本季度通报频次及涉及应用数量
- 本年度通报频次及涉及应用数量
- 累计通报案例总数展示
- 累计涉及的应用总数统计
- 最近一次通报的发布日期显示
- 最近一次通报的监管部门名称展示

注：所有时间维度（本月、本季度、本年度）下的通报频次和涉及应用统计逻辑、计算口径必须严格保持一致

##### 2.1.1.2 趋势概览

- **模块定位**：简明直观地展现通报数据的月度变化趋势，帮助用户快速把握整体动态
- **图表类型**：采用折线图作为主要展示形式
- **数据轴设置**：
  - X轴：时间维度（按月份展示）
  - Y轴：通报数量（或相关核心指标）
- **趋势展示**：清晰反映数据随时间（月份）的上升、下降或波动趋势
- **交互功能**：
  - 鼠标悬停显示：用户将鼠标悬停在数据点上时显示该月份的具体数值
  - 筛选功能：提供按特定时间范围查看趋势的选项（如近6个月、本年至今）
- **设计要求**：界面简洁，确保图表在各种屏幕尺寸下均清晰可读，必要时提供图例说明或关键节点数据标签

##### 2.1.1.3 重点问题概览

- **模块定位**：集中展示通报问题中最需要关注的重点问题或高频问题
- **模块标题**：**重点问题概览**（使用二级标题格式，加粗显示）
- **核心内容**：采用表格形式呈现，包含以下列：
  - 问题标题（加粗显示）
  - 频次数据（颜色标签标识）
  - 状态标识（启用/禁用开关）
- **频次标识规则**：
  - 红色标签：重要（频次 ≥ 50次）
  - 橙色标签：一般（频次30 - 49次）
  - 黄色标签：关注（频次 10 - 29次）
  - 蓝色标签：低频（频次 1 - 9次）
- **显示设置**：默认展示前10个高频问题，模块整体保持高度紧凑，确保内容的可读性
- **操作功能**：支持后台配置管理，可对问题条目进行启用/禁用控制

##### 2.1.1.4 监管部门分布

- 各通报部门出现频次分布图（饼图/柱状图）
- 热点违规问题词云

##### 2.1.1.5 近期监管资讯

- 展示最新发布的监管资讯列表
- 包含资讯标题、发布日期、发布部门
- 提供〖查看详情〗链接跳转到完整资讯内容

#### 2.1.2 年度月度趋势图展示模块
\n- **功能定位**：
  - 独立的趋势分析模块，与后台首页配置中的〖年度月度趋势图〗配置项完全对应
  - 可通过后台配置控制该模块在前台的显示/隐藏状态

- **核心功能**：
  - 使用折线图展示年度和月度通报案例数量的时间趋势
  - 提供年度视图和月度视图的切换功能
  - 年度视图：展示多年度通报案例总量对比趋势
  - 月度视图：展示选定年度内各月份通报案例数量变化
  - 支持图表交互：鼠标悬停显示具体数值，点击数据点可下钻查看对应时间段的案例列表

- **数据展示要求**：
  - 图表自适应页面布局，支持响应式设计
  - 数据实时更新，延迟不超过设定的数据更新周期
  - 提供数据导出功能（Excel/CSV格式）

- **视觉设计**：
  - 图表配色与整体设计风格保持一致
  - 清晰标注坐标轴、图例和数据标签
  - 时间轴支持拖拽缩放功能

#### 2.1.3 数据可视化分析模块

- 各通报部门出现频次分布图（饼图/柱状图）
- 热点违规问题词云

#### 2.1.4 案例详情查询系统

- **关键词检索功能**：
  - 在案例查询页面顶部显著位置设置搜索框
  - 支持输入关键词检索案例标题、摘要、编号等核心文本信息
  - 用户可通过点击〖搜索〗按钮或按下回车键触发检索
  - 提供清空输入框的快捷按钮
  - 检索后页面刷新，仅展示包含关键词的案例列表
  - 无匹配结果时显示〖未找到相关案例〗提示

- 可排序、可分页的案例列表展示
- 案例条目包含信息：通报发布日期、被通报应用名称、应用开发者/运营者、发出通报的监管部门全称、应用来源平台、主要违规问题摘要
- 操作按钮：〖查看详情〗（模态框或新页面详细违规内容）、〖原文链接〗（新窗口打开官方原始通报网页）

#### 2.1.5 监管资讯查询系统

-可排序、可分页的监管资讯列表展示
- 案例条目包含信息：监管资讯发布日期、发出监管资讯的监管部门、监管资讯摘要
- 操作按钮：〖查看详情〗（模态框或新页面详细监管资讯内容）、〖原文链接〗（新窗口打开官方原始通报网页）

#### 2.1.6 违规问题分析模块

- **功能定位**：
  - 集成在趋势分析页面内，作为独立的〖违规问题分析〗面板或标签页
  - 从宏观趋势深入到微观归因，帮助运营人员快速定位问题根源

- **多维度分析指标**：
  - **违规类型分析**：统计各类违规（如内容违规、行为违规、交易违规等）的数量、占比及变化趋势
  - **用户群体分析**：按用户属性（如新/老用户、会员等级、注册渠道等）分析违规分布情况
  - **时间趋势分析**：按小时、日、周等不同粒度，分析违规发生的时间规律
  - **内容/场景分析**：分析违规高发的具体内容板块、功能场景或商品类别
  - **严重程度分析**：按违规的严重等级（如轻度、中度、严重）进行划分和统计

- **数据可视化与交互**：
  - 使用组合图表呈现分析结果：
    +饼图展示违规类型分布
    + 柱状图展示时间趋势
    + 表格展示明细数据
  - 支持数据下钻功能：点击某类违规的统计数字，可查看对应的违规记录列表
  - 提供数据筛选功能：支持按维度自由组合筛选（如选择特定时间范围、违规类型、用户群体等）

- **非功能性要求**：
  - 数据展示接近实时，延迟不超过设定的数据更新周期
  - 界面设计与现有趋势分析页面保持风格一致

#### 2.1.7 模块可见性响应规则\n
- 前端根据后台模块管理配置动态控制各功能模块的显示状态
- 当某模块被后台关闭时，其对应的导航入口、页面链接或内容区域对用户完全隐藏
- 前端布局自适应调整，隐藏模块后页面自动优化排版，避免出现空白区域
- 支持实时响应后台配置变更，无需刷新页面即可生效

### 2.2 后台管理系统功能

#### 2.2.1 智能案例导入中心

- **多模态输入支持**：
  - **文本输入**：用户可直接粘贴或输入一段文字描述，系统自动识别并提取关键信息
  - **图片上传**：支持JPG、PNG等图片格式，AI模型识别图片中的文字信息并提取
  - **PDF文档上传**：支持PDF文件，自动解析文档内容提取结构化数据

- **AI信息处理流程**：
  - 集成多模态理解大模型插件，自动识别输入内容中的关键信息
  - 提取当事人姓名、时间、地点、事件描述等预设字段信息
  - 自动填充到案例编辑界面的对应位置
  - 提供清晰的预览界面供用户核对和手动修改

- **批量处理能力**：
  - 支持同时处理多个输入源
  - 批量提取和填充案例信息
  - 批量导入到数据库

#### 2.2.2 案例数据管理中心

- 案例数据完整CRUD操作界面
- 支持上传Excel/CSV文件批量导入数据
- 支持筛选或全部数据导出为常用格式文件
- **监管部门与应用平台快速新增功能**：
  - 在案例编辑界面中，〖监管部门〗和〖应用平台〗字段采用可输入的下拉选择框
  - 当用户输入的部门或平台名称在系统中不存在时，下拉列表自动显示〖新增：[用户输入名称]〗选项
  - 用户选择新增选项后，系统自动将该名称作为新记录保存至〖部门与平台〗管理模块的对应分类中
  - 新增操作无需离开当前编辑页面，保存案例时同步完成新记录的创建
  - 操作完成后显示成功提示，告知用户新记录已保存至主数据模块
  - 新增的部门或平台记录初始仅包含名称字段，后续可在〖部门与平台〗管理模块中补充完善详细信息

- **案例筛选与检索功能**：
  - 在案例管理页面顶部设置筛选区域，提供以下筛选条件：
    + 通报日期范围选择（起始日期-结束日期）
    + 监管部门下拉选择框（支持多选或单选）
    + 应用平台下拉选择框（支持多选或单选）
    + 应用名称/开发者文本输入框
  - 提供关键词检索功能：
    + 在筛选区域设置搜索框，支持输入关键词检索案例标题、摘要、编号、违规内容等字段
    + 用户可通过点击〖搜索〗按钮或按下回车键触发检索
    + 提供〖重置〗按钮清空所有筛选条件和关键词
  - 筛选和检索可组合使用，结果实时更新案例列表
  - 筛选或检索后的列表仍支持排序和分页功能
  - 无匹配结果时显示〖未找到符合条件的案例〗提示\n
#### 2.2.3 监管资讯管理中心

- 案例数据完整CRUD操作界面
- 支持上传Excel/CSV文件批量导入数据
- 支持筛选或全部数据导出为常用格式文件

#### 2.2.4 前台模块可见性管理中心

- **功能定位**：
  - 提供集中的模块管理界面，用于控制前台各功能模块的显示/隐藏状态
  - 管理员可独立控制每个模块的可见性，实现灵活的页面布局管理

- **可控模块列表**：
  - 数据概览（核心数据总览面板）
  - 趋势概览
  - 重点问题概览
  - 监管部门分布
  - 近期监管资讯
  - 案例查询模块
  - 监管资讯模块
  - 监管部门模块
  - 趋势分析模块
  - 问题分析模块

- **管理界面设计**：
  - 采用列表式布局，每个模块独立成行
  - 每行显示模块名称和状态开关（Toggle按钮或复选框）
  - 开关状态清晰标识：开启（蓝色/绿色）、关闭（灰色）
  - 支持批量操作：全部开启、全部关闭功能按钮

- **操作规则**：
  - 点击开关按钮即时切换模块状态
  - 状态变更后自动保存至数据库，无需额外确认
  - 操作后显示简洁的成功提示（〖模块状态已更新〗）
  - 前台同步响应配置变更，延迟不超过设定的缓存刷新周期

- **扩展性设计**：
  - 模块列表采用配置化设计，便于后续新增可控模块
  - 预留模块分组功能入口，支持按功能类型分组管理

#### 2.2.5 重点问题概览配置功能

- **核心功能要求**：
  - 实现一套完整的 CRUD API 函数，确保数据的增删改查操作安全、高效
  - 重点问题数据项的管理需支持查询（按条件筛选、分页）、创建（新增数据条目）、更新（修改现有条目信息）、删除（支持逻辑删除或物理删除）操作
  - 提供独立的排序管理功能，允许管理员通过拖拽或输入序号等方式自定义问题在概览中的显示顺序
  - 为每个问题配置项提供启用/禁用开关控制，以便灵活控制其是否在首页展示

- **API 接口设计要求**：
  - 接口设计需符合 RESTful 规范，并确保请求与响应格式统一（使用 JSON）
  - 创建和更新操作应包含必要的数据校验逻辑

- **后端数据管理要求**：
  - 设计合理的数据表结构，包含以下字段：
    + 问题标题/内容
    + 排序序号（用于控制展示顺序）
    + 状态（启用/禁用）
    + 创建时间、更新时间等必要的系统字段

- **具体接口定义**：

  **1. 查询重点问题列表**
  - **请求方法**：GET
  - **URL**：/api/key-issues/
  - **参数**：
    - page (int)：页码，默认为1
    - per_page (int)：每页条数，默认为10
    - status (str)：状态筛选（enabled/disabled/all），默认为all
    - search (str)：关键词搜索
  - **响应示例**：
    ```json
    {
      \"total\": 20,
      \"page\": 1,
      \"per_page\": 10,
      \"items\": [
        {
          \"id\": 1,
          \"title\": \"违规收集个人信息\",
          \"order\": 1,
          \"status\": \"enabled\",
          \"created_at\": \"2025-12-08T12:00:00Z\",
          \"updated_at\": \"2025-12-08T12:00:00Z\"
        },
        // ... more items
      ]
    }
    ```

  **2. 创建重点问题**
  - **请求方法**：POST
  - **URL**：/api/key-issues/
  - **参数**：
    - title (str, required)：问题标题
    - order (int, required)：排序序号
    - status (str, optional)：状态（enabled/disabled），默认为enabled
  - **响应示例**：
    ```json
    {
      \"id\": 21,
      \"title\": \"虚假宣传违规\",
      \"order\": 5,
      \"status\": \"enabled\",
      \"created_at\": \"2025-12-08T12:05:00Z\",
      \"updated_at\": \"2025-12-08T12:05:00Z\"
    }
    ```

  **3. 更新重点问题**
  - **请求方法**：PUT/PATCH
  - **URL**：/api/key-issues/{id}/
  - **参数**：
    - title (str, optional)：问题标题
    - order (int, optional)：排序序号
    - status (str, optional)：状态（enabled/disabled）
  - **响应示例**：
    ```json
    {
      \"id\": 10,
      \"title\": \"内容审核不严\",
      \"order\": 3,
      \"status\": \"disabled\",
      \"created_at\": \"2025-12-07T10:00:00Z\",
      \"updated_at\": \"2025-12-08T12:10:00Z\"
    }
    ```
